---
- name: Add Microsoft repository
  yum_repository:
    name: rhel
    enabled: yes
    gpgcheck: yes
    gpgkey: https://packages.microsoft.com/keys/microsoft.asc
    description: Microsoft repos
    file: microsoft
    baseurl: https://packages.microsoft.com/rhel/8/prod
  become: yes

- name: Add EPEL repository
  yum_repository:
    name: epel
    description: EPEL repo
    baseurl: https://download.fedoraproject.org/pub/epel/{{ansible_distribution_major_version}}/$basearch/
  become: yes
  
#- name: Add Epel
#  dnf:
#    name: 
#      - http://download.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm
#    state: present
#  become: yes

- name: Install packages
  dnf:
    name:
      - curl
      - git
      - gnupg
      - gzip
      - hashcat
      - htop
      - nmap
      - openssl
      - unzip
      - wget
      - whois
      - gtkhash
      - ffmpeg
      - ffmpeg-libs
      - fuse-exfat
      - exfat-utils
      - peek
      - powershell
      - virt-manager
    update_cache: yes
    state: latest
  become: yes
