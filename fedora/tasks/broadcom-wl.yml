---
- name: Download broadcom-wl
  git:
    repo: 'https://github.com/antoineco/broadcom-wl.git'
    dest: ./broadcom-wl

- name: Verify needed packages
  dnf:
    name: 
      - kernel-devel
      - broadcom-wl
      - dkms
    state: present

- name: Install kernel module
  command:
    cmd: dkms add ./broadcom-wl

- name: Cleanup broadcom-wl
  file:
    path: ./broadcom-wl
    state: absent